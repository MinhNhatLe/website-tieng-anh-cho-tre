@model IEnumerable<EnglishForKids_LMN.Models.Question>
@using EnglishForKids_LMN.Models;
@*@{
        ViewBag.Title = "Do Test - English For Kids";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }*@

@{
    ViewBag.Title = "Do Test - English For Kids";
    if (Session["ID_User"] != null)
    {
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
    //if (Session["ID_Admin"] != null)
    if (Session["Admin_Code"] != null)

    {
        Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
    }
    if (Session["ID_User"] == null && Session["Admin_Code"] == null)
    {
        Response.Redirect("~/Login/SignIn");
    }
}




@{
    List<Question> questions2 = Session["questions2"] as List<Question>;
    List<Question> questions3 = Session["questions3"] as List<Question>;
    List<Question> questions4 = Session["questions4"] as List<Question>;
    List<Question> questions5 = Session["questions5"] as List<Question>;
}



@{
    //5 phut la 300s
    var endTime = DateTime.UtcNow.AddSeconds(301);
    var timeRemaining = TimeSpan.FromTicks(endTime.Ticks - DateTime.UtcNow.Ticks).TotalSeconds;
}
<style>
    .background-test {
        padding: 20px;
        background-color: #fff;
        border: 10px; /* Viền của cái khối */
        border-color: rgb(0 0 0 / 2%);
        border-style: solid;
        margin-top: 10px;
        margin-bottom: 10px;
        border-radius: 20px;
        box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
    }


    .btn-hoanthanh-test {
        color: #fff;
        box-shadow: 0 1px 1px rgb(0 0 0 / 9%);
        font-size: 20px;
        width: 400px;
        height: 60px;
        cursor: pointer;
        border-radius: 10px;
        outline-style: inherit;
        outline-color: aqua;
        margin-top: 20px;
        margin-bottom: 20px;
        border: 3px solid #315cfd;
        transition: all 0.3s;
        font-weight: 700;
        background: #4FD1C5;
        background: linear-gradient(90deg, rgb(98 213 95) 0%, rgb(1 32 195) 100%);
    }

        .btn-hoanthanh-test:hover {
            color: #fff;
            transform: translateY(-6px);
            font-size: 18px;
        }
</style>
<div class="container">

    <div class="row">
        <div class="col-lg-12 col-sm-12 col-xs-12" style="position:relative;">
            <img src="~/Content/images/gif/colen.gif" alt="results" style="width:20%; position: absolute; left: -100px; top: 50px" />
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-sm-12 col-xs-12" style="position:relative;">
            <img src="~/Content/images/gif/win1.gif" alt="results" style="width:20%; position: absolute; left: -100px; top: 1200px" />
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-sm-12 col-xs-12" style="position:relative;">
            <img src="~/Content/images/gif/cute.gif" alt="results" style="width:20%; position: absolute; left: -100px; top: 2300px" />
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-sm-12 col-xs-12" style="position:relative;">
            <img src="~/Content/images/gif/gif_win7.gif" alt="results" style="width:20%; position: absolute; right: 230px; bottom: -3400px" />
        </div>
    </div>

    <div class="row">
        <div class="col-lg-12 col-sm-12 col-xs-12">
            <div class="border-title">
                <div class="container_title">
                    <h2 class="title">
                        <span class="title-word title-word-1">T</span>
                        <span class="title-word title-word-2">E</span>
                        <span class="title-word title-word-3">S</span>
                        <span class="title-word title-word-4">T</span>
                    </h2>
                </div>
            </div>
        </div>
    </div>



    @using (Html.BeginForm("Do_Test", "Test", FormMethod.Post))
    {
        <div class="row background-test">
            <div class="row">
                <div class="col-lg-2 col-sm-0 col-xs-0">

                </div>
                <div class="col-lg-8 col-sm-12 col-xs-12">
                    <div class="row">
                        <div class="col-lg-12 col-xs-12">

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-xs-6">
                            <div>
                                <div style="font-size:20px;">Test time: <span id="minRemaining"></span>:<span id="secRemaining" style="color:red"></span></div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-xs-6">

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-sm-12 col-xs-12">
                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 1: @questions2[0].Content</p>
                                <p><input type="radio" name="choice1" id="choice1" value="@questions2[0].Answer_Content1" /> @questions2[0].Answer_Content1</p>
                                <p><input type="radio" name="choice1" id="choice1" value="@questions2[0].Answer_Content2" /> @questions2[0].Answer_Content2</p>
                                <p><input type="radio" name="choice1" id="choice1" value="@questions2[0].Answer_Content3" /> @questions2[0].Answer_Content3</p>
                                <p><input type="radio" name="choice1" id="choice1" value="@questions2[0].Answer_Content4" /> @questions2[0].Answer_Content4</p>
                            </div>


                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 2: @questions2[1].Content</p>
                                <p><input type="radio" name="choice2" id="choice2" value="@questions2[1].Answer_Content1" /> @questions2[1].Answer_Content1</p>
                                <p><input type="radio" name="choice2" id="choice2" value="@questions2[1].Answer_Content2" /> @questions2[1].Answer_Content2</p>
                                <p><input type="radio" name="choice2" id="choice2" value="@questions2[1].Answer_Content3" /> @questions2[1].Answer_Content3</p>
                                <p><input type="radio" name="choice2" id="choice2" value="@questions2[1].Answer_Content4" /> @questions2[1].Answer_Content4</p>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 3: @questions2[2].Content</p>
                                <p><input type="radio" name="choice3" id="choice3" value="@questions2[2].Answer_Content1" /> @questions2[2].Answer_Content1</p>
                                <p><input type="radio" name="choice3" id="choice3" value="@questions2[2].Answer_Content2" /> @questions2[2].Answer_Content2</p>
                                <p><input type="radio" name="choice3" id="choice3" value="@questions2[2].Answer_Content3" /> @questions2[2].Answer_Content3</p>
                                <p><input type="radio" name="choice3" id="choice3" value="@questions2[2].Answer_Content4" /> @questions2[2].Answer_Content4</p>
                            </div>


                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 4: @questions3[0].Content</p>
                                <p>Enter answer : <input type="text" name="text1" id="text1" style="width:100px;" required /></p>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 5: @questions3[1].Content</p>
                                <p>Enter answer : <input type="text" name="text2" id="text2" style="width:100px;" required /></p>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 6: @questions3[2].Content</p>
                                <p>Enter answer : <input type="text" name="text2" id="text2" style="width:100px;" required /></p>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <pre id="question_paragraph" style="text-align:center;">

                                </pre>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 7: @questions4[0].Content</p>
                                <p><input type="radio" name="choice4" id="choice4" value="@questions4[0].Answer_Content1" /> @questions4[0].Answer_Content1</p>
                                <p><input type="radio" name="choice4" id="choice4" value="@questions4[0].Answer_Content2" /> @questions4[0].Answer_Content2</p>
                                <p><input type="radio" name="choice4" id="choice4" value="@questions4[0].Answer_Content3" /> @questions4[0].Answer_Content3</p>
                                <p><input type="radio" name="choice4" id="choice4" value="@questions4[0].Answer_Content4" /> @questions4[0].Answer_Content4</p>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 8: @questions4[1].Content</p>
                                <p><input type="radio" name="choice5" id="choice5" value="@questions4[1].Answer_Content1" /> @questions4[1].Answer_Content1</p>
                                <p><input type="radio" name="choice5" id="choice5" value="@questions4[1].Answer_Content2" /> @questions4[1].Answer_Content2</p>
                                <p><input type="radio" name="choice5" id="choice5" value="@questions4[1].Answer_Content3" /> @questions4[1].Answer_Content3</p>
                                <p><input type="radio" name="choice5" id="choice5" value="@questions4[1].Answer_Content4" /> @questions4[1].Answer_Content4</p>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;;">
                                <video style="width:100%;height:35vh;" controls>
                                    <source src="~/Content/video/@Session["video"]" type="video/mp4" />
                                </video>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 9: @questions5[0].Content</p>
                                <p><input type="radio" name="choice6" id="choice6" value="@questions5[0].Answer_Content1" /> @questions5[0].Answer_Content1</p>
                                <p><input type="radio" name="choice6" id="choice6" value="@questions5[0].Answer_Content2" /> @questions5[0].Answer_Content2</p>
                                <p><input type="radio" name="choice6" id="choice6" value="@questions5[0].Answer_Content3" /> @questions5[0].Answer_Content3</p>
                                <p><input type="radio" name="choice6" id="choice6" value="@questions5[0].Answer_Content4" /> @questions5[0].Answer_Content4</p>
                            </div>

                            <div class="mydiv" style="width:100%;max-width:100%;">
                                <p>Question 10: @questions5[1].Content</p>
                                <p><input type="radio" name="choice7" id="choice7" value="@questions5[1].Answer_Content1" /> @questions5[1].Answer_Content1</p>
                                <p><input type="radio" name="choice7" id="choice7" value="@questions5[1].Answer_Content2" /> @questions5[1].Answer_Content2</p>
                                <p><input type="radio" name="choice7" id="choice7" value="@questions5[1].Answer_Content3" /> @questions5[1].Answer_Content3</p>
                                <p><input type="radio" name="choice7" id="choice7" value="@questions5[1].Answer_Content4" /> @questions5[1].Answer_Content4</p>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-lg-2 col-sm-2 col-xs-0">

                        </div>
                        <div class="col-lg-8 col-sm-8 col-xs-12" style="text-align:center;">
                            <input type="submit" value="Finish" class="btn btn-primary center-block btn-hoanthanh-test bx-flashing-hover" style="width: 100%;" />
                        </div>
                        <div class="col-lg-2 col-sm-2 col-xs-0">

                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-sm-0 col-xs-0">

                </div>
            </div>
        </div>
    }
</div>
<br />
<br />


@*@using (Html.BeginForm("Do_Test", "Test", FormMethod.Post))
    {
        <br />
        <br />
        <div class="row">
            <div></div>
            <div class="col-md-12">
                <div>Thời gian làm bài: <span id="minRemaining"></span>:<span id="secRemaining"></span></div>
            </div>
        </div>
        <div class="mydiv" style="width:100%;max-width:100%;">

            <p>Question 1: @questions2[0].Content</p>
            <p><input type="radio" name="choice1" id="choice1" value="@questions2[0].Answer_Content1" /> @questions2[0].Answer_Content1</p>
            <p><input type="radio" name="choice1" id="choice1" value="@questions2[0].Answer_Content2" /> @questions2[0].Answer_Content2</p>
            <p><input type="radio" name="choice1" id="choice1" value="@questions2[0].Answer_Content3" /> @questions2[0].Answer_Content3</p>
            <p><input type="radio" name="choice1" id="choice1" value="@questions2[0].Answer_Content4" /> @questions2[0].Answer_Content4</p>

        </div>


        <div class="mydiv" style="width:100%;max-width:100%;">

            <p>Question 2: @questions2[1].Content</p>
            <p><input type="radio" name="choice2" id="choice2" value="@questions2[1].Answer_Content1" /> @questions2[1].Answer_Content1</p>
            <p><input type="radio" name="choice2" id="choice2" value="@questions2[1].Answer_Content2" /> @questions2[1].Answer_Content2</p>
            <p><input type="radio" name="choice2" id="choice2" value="@questions2[1].Answer_Content3" /> @questions2[1].Answer_Content3</p>
            <p><input type="radio" name="choice2" id="choice2" value="@questions2[1].Answer_Content4" /> @questions2[1].Answer_Content4</p>

        </div>

        <div class="mydiv" style="width:100%;max-width:100%;">

            <p>Question 3: @questions2[2].Content</p>
            <p><input type="radio" name="choice3" id="choice3" value="@questions2[2].Answer_Content1" /> @questions2[2].Answer_Content1</p>
            <p><input type="radio" name="choice3" id="choice3" value="@questions2[2].Answer_Content2" /> @questions2[2].Answer_Content2</p>
            <p><input type="radio" name="choice3" id="choice3" value="@questions2[2].Answer_Content3" /> @questions2[2].Answer_Content3</p>
            <p><input type="radio" name="choice3" id="choice3" value="@questions2[2].Answer_Content4" /> @questions2[2].Answer_Content4</p>

        </div>


        <div class="mydiv" style="width:100%;max-width:100%;">
            <p>Question 4: @questions3[0].Content</p>
            <p>Enter answer : <input type="text" name="text1" id="text1" style="width:100px;" /></p>
        </div>

        <div class="mydiv" style="width:100%;max-width:100%;">
            <p>Question 5: @questions3[1].Content</p>
            <p>Enter answer : <input type="text" name="text2" id="text2" style="width:100px;" /></p>
        </div>

        <div class="mydiv" style="width:100%;max-width:100%;">
            <p>Question 6: @questions3[2].Content</p>
            <p>Enter answer : <input type="text" name="text2" id="text2" style="width:100px;" /></p>
        </div>

        <div class="mydiv" style="width:100%;max-width:100%;">
            <pre id="question_paragraph" style="text-align:center;">

            </pre>
        </div>

        <div class="mydiv" style="width:100%;max-width:100%;">

            <p>Question 7: @questions4[0].Content</p>
            <p><input type="radio" name="choice4" id="choice4" value="@questions4[0].Answer_Content1" /> @questions4[0].Answer_Content1</p>
            <p><input type="radio" name="choice4" id="choice4" value="@questions4[0].Answer_Content2" /> @questions4[0].Answer_Content2</p>
            <p><input type="radio" name="choice4" id="choice4" value="@questions4[0].Answer_Content3" /> @questions4[0].Answer_Content3</p>
            <p><input type="radio" name="choice4" id="choice4" value="@questions4[0].Answer_Content4" /> @questions4[0].Answer_Content4</p>
        </div>

        <div class="mydiv" style="width:100%;max-width:100%;">

            <p>Question 8: @questions4[1].Content</p>
            <p><input type="radio" name="choice5" id="choice5" value="@questions4[1].Answer_Content1" /> @questions4[1].Answer_Content1</p>
            <p><input type="radio" name="choice5" id="choice5" value="@questions4[1].Answer_Content2" /> @questions4[1].Answer_Content2</p>
            <p><input type="radio" name="choice5" id="choice5" value="@questions4[1].Answer_Content3" /> @questions4[1].Answer_Content3</p>
            <p><input type="radio" name="choice5" id="choice5" value="@questions4[1].Answer_Content4" /> @questions4[1].Answer_Content4</p>

        </div>

        <div class="mydiv" style="width:100%;max-width:100%;;">
            <video style="width:100%;height:70vh;" controls>
                <source src="~/Content/video/@Session["video"]" type="video/mp4" />
            </video>
        </div>

        <div class="mydiv" style="width:100%;max-width:100%;">

            <p>Question 9: @questions5[0].Content</p>
            <p><input type="radio" name="choice6" id="choice6" value="@questions5[0].Answer_Content1" /> @questions5[0].Answer_Content1</p>
            <p><input type="radio" name="choice6" id="choice6" value="@questions5[0].Answer_Content2" /> @questions5[0].Answer_Content2</p>
            <p><input type="radio" name="choice6" id="choice6" value="@questions5[0].Answer_Content3" /> @questions5[0].Answer_Content3</p>
            <p><input type="radio" name="choice6" id="choice6" value="@questions5[0].Answer_Content4" /> @questions5[0].Answer_Content4</p>

        </div>

        <div class="mydiv" style="width:100%;max-width:100%;">

            <p>Question 10: @questions5[1].Content</p>
            <p><input type="radio" name="choice7" id="choice7" value="@questions5[1].Answer_Content1" /> @questions5[1].Answer_Content1</p>
            <p><input type="radio" name="choice7" id="choice7" value="@questions5[1].Answer_Content2" /> @questions5[1].Answer_Content2</p>
            <p><input type="radio" name="choice7" id="choice7" value="@questions5[1].Answer_Content3" /> @questions5[1].Answer_Content3</p>
            <p><input type="radio" name="choice7" id="choice7" value="@questions5[1].Answer_Content4" /> @questions5[1].Answer_Content4</p>

        </div>
        <br />
        <input type="submit" value="Submit" class="btn btn-primary" />
    }*@
<script src="~/Scripts/jquery-3.4.1.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script>
        $(document).ready(function () {
            $("#question_paragraph").load("/Content/txt/@Session["paragraph"]");
        });
</script>

<script>
    var remSeconds = @timeRemaining;
    var secondsCounter = remSeconds % 60;

    function formatNumber(number) {
        if (number < 10) return '0' + number;
        else return '' + number;
    }

    function startTick() {
        document.getElementById('secRemaining').innerText = formatNumber(secondsCounter);
        document.getElementById('minRemaining').innerText = formatNumber(parseInt(remSeconds / 60));

        var _tick = setInterval(function () {
            if (remSeconds > 0) {
                remSeconds = remSeconds - 1;
                secondsCounter = secondsCounter - 1;
                document.getElementById('secRemaining').innerText = formatNumber(secondsCounter);
                document.getElementById('minRemaining').innerText = formatNumber(parseInt(remSeconds / 60));
                if (secondsCounter == 0)
                    secondsCounter = 60;
            }
            else {
                alert("Exam time is over!!!");
                clearInterval(_tick);
            }
        },
            1000);
    }
    startTick();
</script>
<script>
    // Lấy biểu mẫu
    var form = document.querySelector('form');

    // Thêm một trình lắng nghe sự kiện vào nút gửi
    form.addEventListener('submit', function (event) {
        // Hiện hộp xác nhận
        var confirmed = confirm('Are you sure you want to submit this test?');

        // Nếu người dùng bấm hủy, ngăn không cho gửi biểu mẫu
        if (!confirmed) {
            event.preventDefault();
        }
    });
</script>